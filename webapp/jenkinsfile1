pipeline {
    agent any

    stages {
        stage('Building Docker image') {
            steps {
                sh 'docker rmi -f img-frontend'
		sh 'cd webapp && docker build -t img-frontend .'
            }
        }

stage('Building Docker container') {
            steps {
		sh'docker stop cont-frontend && docker rm cont-frontend'
		sh 'docker run -d -p 8000:80 --network mynetwork --name cont-frontend img-frontend'
            }
        }

    }
}
